<div class="owner-dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <h1>Owner Dashboard</h1>
    <p>Welcome back, {{ currentUser?.firstName }}! Manage your properties and bookings.</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">üè†</div>
      <div class="stat-content">
        <h3>{{ stats.totalProperties }}</h3>
        <p>Total Properties</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">üìÖ</div>
      <div class="stat-content">
        <h3>{{ stats.totalBookings }}</h3>
        <p>Total Bookings</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">üí∞</div>
      <div class="stat-content">
        <h3>{{ formatPrice(stats.totalRevenue) }}</h3>
        <p>Total Revenue</p>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">‚úÖ</div>
      <div class="stat-content">
        <h3>{{ stats.availableProperties }}</h3>
        <p>Available Properties</p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h2>Quick Actions</h2>
    <div class="action-buttons">
      <button class="action-btn primary" (click)="onAddProperty()">
        <span class="btn-icon">‚ûï</span>
        Add Property
      </button>
      <button class="action-btn secondary" (click)="onManageProperties()">
        <span class="btn-icon">üè†</span>
        Manage Properties
      </button>
      <button class="action-btn secondary" (click)="onViewBookings()">
        <span class="btn-icon">üìÖ</span>
        View Bookings
      </button>
      <button class="action-btn secondary" (click)="onViewAnalytics()">
        <span class="btn-icon">üìä</span>
        View Analytics
      </button>
    </div>
  </div>

  <!-- Content Grid -->
  <div class="content-grid">
    <!-- Recent Bookings -->
    <div class="content-card">
      <div class="card-header">
        <h3>Recent Bookings</h3>
        <button class="view-all-btn" (click)="onViewBookings()">View All</button>
      </div>
      <div class="bookings-list">
        <div class="booking-item" *ngFor="let booking of getRecentBookings()" (click)="onBookingClick(booking)">
          <div class="booking-info">
            <h4>{{ booking.propertyName }}</h4>
            <p class="booking-dates">
              {{ booking.checkInDate | date:'shortDate' }} - {{ booking.checkOutDate | date:'shortDate' }}
            </p>
            <p class="booking-guest">{{ booking.userName }}</p>
          </div>
          <div class="booking-status">
            <span class="status-badge" [style.background-color]="getStatusColor(booking.status)">
              {{ booking.status }}
            </span>
            <p class="booking-price">{{ formatPrice(booking.totalPrice) }}</p>
          </div>
        </div>
        <div class="empty-state" *ngIf="getRecentBookings().length === 0">
          <p>No recent bookings</p>
        </div>
      </div>
    </div>

    <!-- Top Properties -->
    <div class="content-card">
      <div class="card-header">
        <h3>Top Properties</h3>
        <button class="view-all-btn" (click)="onManageProperties()">Manage All</button>
      </div>
      <div class="properties-list">
        <div class="property-item" *ngFor="let property of getTopProperties()" (click)="onPropertyClick(property)">
          <div class="property-image">
            <img [src]="getPropertyImage(property)" 
                 [alt]="property.name"
                 (error)="onImageError($event)">
          </div>
          <div class="property-info">
            <h4>{{ property.name }}</h4>
            <p class="property-location">{{ property.city }}, {{ property.state }}</p>
            <div class="property-stats">
              <span class="stat">{{ property.totalBookings }} bookings</span>
              <span class="stat">{{ formatPrice(property.totalRevenue) }} revenue</span>
            </div>
          </div>
        </div>
        <div class="empty-state" *ngIf="getTopProperties().length === 0">
          <p>No properties yet</p>
        </div>
      </div>
    </div>
  </div>

  <!-- All Properties Overview -->
  <div class="properties-overview" *ngIf="properties.length > 0">
    <div class="section-header">
      <h2>All Properties</h2>
      <button class="view-all-btn" (click)="onManageProperties()">Manage All</button>
    </div>
    <div class="properties-grid">
      <div class="property-card" *ngFor="let property of properties" (click)="onPropertyClick(property)">
        <div class="property-image">
          <img [src]="getPropertyImage(property)" 
               [alt]="property.name"
               (error)="onImageError($event)">
          <div class="property-badge" [class.available]="property.isAvailable" [class.unavailable]="!property.isAvailable">
            {{ property.isAvailable ? 'Available' : 'Unavailable' }}
          </div>
        </div>
        <div class="property-details">
          <h3>{{ property.name }}</h3>
          <p class="property-location">{{ property.city }}, {{ property.state }}</p>
          <div class="property-info">
            <span class="info-item">üõèÔ∏è {{ property.bedrooms }} bed{{ property.bedrooms !== 1 ? 's' : '' }}</span>
            <span class="info-item">üõÅ {{ property.bathrooms }} bath{{ property.bathrooms !== 1 ? 's' : '' }}</span>
            <span class="info-item">üìê {{ property.area }} sq ft</span>
          </div>
          <div class="property-footer">
            <span class="price">{{ formatPrice(property.price) }}/night</span>
            <div class="property-stats">
              <span class="stat">{{ property.totalBookings }} bookings</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="loading-spinner"></div>
  <p>Loading dashboard...</p>
</div>

<!-- Error State -->
<div class="error-container" *ngIf="error">
  <div class="error-message">
    <span class="error-icon">‚ö†Ô∏è</span>
    {{ error }}
  </div>
  <button class="retry-button" (click)="loadDashboardData()">
    Try Again
  </button>
</div>